---
config:
  layout: elk
---
classDiagram
direction TB

    class PaymentStatus {
        UNPAID
        PAID
    }
    <<Enumeration>> PaymentStatus

    class Species {
	    CAT
	    DOG
	    EXOTIC
    }
    <<Enumeration>> Species

    class Sex {
        MALE
        FEMALE
    }
    <<Enumeration>> Sex

    class WardType {
        STANDARD
        ICU
        ISOLATION
    }
    <<Enumeration>> WardType

    class CageStatus {
        AVAILABLE
        OCCUPIED
        RESERVED
    }
    <<Enumeration>> CageStatus

    class AppointmentStatus {
        SCHEDULED
        CHECKED_IN
        COMPLETED
        CANCELLED
        NO_SHOW
    }
    <<Enumeration>> AppointmentStatus

    class RoomStatus {
        AVAILABLE
        IN_PROGRESS
    }
    <<Enumeration>> RoomStatus

    class User {
        -name : str
        -user_id : str
        -phone_no : str
        -no_show_left : int
        -pet_list : List
        -current_appointment : Appointment
	    +add_pet(PetProfile)
    }
    User --> Appointment : makes
    User <-- Appointment
    User <|-- Employee
    User "1" o-- "1..*" PetProfile

    class Employee {
        -employee_id : str
	    -hospital : str
	    -salary : float
    }
    Employee <|-- Vet
    Employee <|-- HospitalStaff
    Employee <|-- HospitalManager

    class Vet {
	    -expertise: Species
        -timeslot_list : List[TimeSlot]
        -current_appointment : Appointment
        +is_available_at(desired_time)
    }
    Vet o-- TimeSlot
    Vet --> MedicalRecord : makes
    Vet <-- Appointment

    class TimeSlot {
        timeslot : datetime
        available : bool
    }

    class HospitalStaff {
        +assign_pet(pet_id, ward_no, cage_no)
        +clean_cage(ward_no, cage_no)
        +assign_vet(room_no)
        +clean_room(room_no)
    }

    class HospitalManager {
        +change_price_rates(..)
        +add_cage(ward_no)
        +remove_cage(ward_no)
        +change_salary(employee_id, amount)
    }

    class PetProfile {
	    -name : str
	    -id : str
	    -species : Species
        -weight : float
        -sex : Sex
        -bithdate : str
        -medical_records : List
    }
    PetProfile "1" o-- "0..*" MedicalRecord

    class Cage {
        -cage_no : str
        -cage_status : CageStatus
        -pet_id : str
    }
    <<Abstract>> Cage
    Cage <|-- S_Cage
    Cage <|-- M_Cage
    Cage <|-- L_Cage
    Cage<--PetProfile

    class S_Cage {
        -size: int
        -price_per_day: float
    }
    class M_Cage {
        -size: int
        -price_per_day: float
    }
    class L_Cage {
        -size: int
        -price_per_day: float
    }

    class MedicalRecord {
        -date : datetime
	    -petprofile : PetProfile
	    -user_id : str
        -vet_id : str
	    -symptoms : str
        -diagnosis : str
        -prescription : Prescription
        -admitted_record : AdmitRecord
    }
    MedicalRecord <-- Prescription
    MedicalRecord <-- AdmitRecord
    MedicalRecord <-- PetProfile

    class Prescription {
        -medicine : Medicine
        -instructions : str
    }
    Prescription <-- Medicine

    class Appointment {
        -appointment_id : str
        -appointment_status : AppointmentStatus
        -date : datetime
        -vet: Vet
        -user : User
        -pet_profile : PetProfile
        -invoice : Invoice
        -Payment : Payment
    }
    Appointment --> Invoice : generates

    class Invoice {
        -invoice_no : str
        -issued_date : datetime
        -total : float
        -payment_status : PaymentStatus
    }

    class PaymentMethod {
        -method : string
    }

    class Payment {
        -payment_id : str
        -amount : float
        -paid_date : datetime
        -method : PaymentMethod
        -receipt_list : List[ServiceItem]
    }
    Payment <-- Appointment : settles

    class ServiceItem { 
    }
    <<Abstract>> ServiceItem
    ServiceItem --o Payment
    ServiceItem <|-- CageService
    ServiceItem <|-- MedicalService

    class CageService {
        -ward: Ward
        -cage: Cage
        -duration_of_stay: int
        +__str__()
    }
    CageService <-- Cage
    CageService <-- Ward

    class MedicalService {
        -examination_fee: int
        -medicine: Medicine
        -quantity: int
        -unit_price: float
        +__str__()
    }
    MedicalService <-- Medicine

    class PetHospital {
	    -name : str
        -user_list : List
	    -employee_list : List
	    -admitted_list : List
        -medical_records_list : List
	    -ward_list : List
        -examination_room_list : List
        -appointment_list : List
        -cage_booking_list : List
        +add_user()
        +add_employee()
        +search_pet_by_id(pet_id)
        +search_employee_by_id(employee_id)
        +search_user_by_id(user_id)
        +look_up_appointments(user_id)
        +look_up_cage_booking(user_id)
        +request_appointment(user_id, vet_id, pet_id, chosen_date)
        +create_new_appointment()
        +book_cage(user_id, pet_id, CageSize, stay_date, duration)
    }
    PetHospital "1" o-- "0..*" MedicalRecord
    PetHospital "1" o-- "1..*" Employee
    PetHospital "1" o-- "1..*" Ward
    PetHospital "1" o-- "0..*" AdmitRecord
    PetHospital "1" o-- "1..*" ExaminationRoom
    PetHospital "1" o-- "0..*" Appointment

    class CageBooking {
        -booking_id : str
        -booking_status : AppointmentStatus
        -booking_date : datetime
        -stay_date : datetime
        -leave_date : datetime
        -user : User
        -cage: Cage
        -invoice : Invoice
        -Payment : Payment
    }
    CageBooking --o PetHospital
    CageBooking <-- Cage

    class Medicine {
        -quantity : int
        -unit_price : float
        -medicine_id : string
        -name : str
    }

    class ExaminationRoom {
        -room_no : str
        -room_status : RoomStatus
    }

    class Ward {
        -ward_no : str
        -type : WardType
        -cage_list : List
        -max_number_of_cage : 10
    }
    Ward "1" o-- "1..10" Cage

    class AdmitRecord {
        -pet : PetProfile
        -ward : Ward
        -cage : Cage
        -date_of_admit : datetime
        -date_of_leave : datetime
        -total_admitted_time_in_days : int
    }
    AdmitRecord --> PetProfile
